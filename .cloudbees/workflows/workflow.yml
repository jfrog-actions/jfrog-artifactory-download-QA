apiVersion: automation.cloudbees.io/v1alpha1
kind: workflow
name: jfrog-repo
on:
  push:
    branches:
      - 'main'

jobs:
  jfrog-repo-job:
    steps:
      - name: checkout-source-code
        uses: cloudbees-io/checkout@v1
  
      # Download file "/example-repo-local/jfrogtest/test.zip" from artifactory repository "example-repo-local" to local "/download/jfrog_repo_test.zip"
      - name: jfrog-actions-workflow-download-file
        uses: cloudbees-io/jfrog-artifactory-download-file@v1.0.14
        with:
          url: ${{ vars.JFROG_URL }}
          username: ${{ vars.JFROG_ACTIONS_USERNAME }}
          password: ${{ secrets.JFROG_ACTIONS_PASSWORD }}
          file-path: ${{ cloudbees.workspace }}/download/jfrog_repo_test.zip
          artifactory-path: example-repo-local/jfrogtest/test.zip
